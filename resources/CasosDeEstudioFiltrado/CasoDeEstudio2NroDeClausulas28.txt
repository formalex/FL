#Background

//Consumidor_DanioDiferenciado debiera ser un subrol de consumidor
// Infractor es un subrol de Proveed

roles Consumidor, Proveedor disjoint  
roles Consumidor_DanioDiferenciado, ProfesionalMatriculado, Oferente, Vendedor, Gobierno_Local, proveedor_servicios_publicosd, proveedor_servicio_publicod, consumidor_servicio_publicod, consumidor_servicio_publico_legislacion_propia, Infractor, EntidadFinanciera, BCRA, Autoridad_Aplicacion_Provincial, Autoridad_Aplicacion_Nacional, Autoridad_Aplicacion, Asociacion_Consumidores , Ministerio_Publico_Fiscal, Defensor_del_Pueblo, autoridad_competente, instrumento_medicion_autorizado, Transportista, Juez disjoint
//ACCIONES

impersonal action paso_un_dia
impersonal action paso_un_dia_reparandose
action PagarGastosTraslado only performable by Proveedor

action ComienzaOferta only performable by Proveedor output values {PorMediosConDatosOferente, PorMediosSinDatosOferente}

action TerminaOferta only performable by Proveedor

action Consumir only performable by Consumidor

action AdquirirByS only performable by Consumidor

action UtilizarByS only performable by Consumidor output values {Gratuitamente, 
Onerosamente, Correctamente, Incorrectamente}

action MantenerRelacionConsumo only performable by Consumidor

action RespetarLeyDefensaConsumidor only performable by Proveedor, ProfesionalMatriculado

action PublicitarServicioProfesional only performable by ProfesionalMatriculado

action SolicitarInformacion only performable by Consumidor

action SuministrarInformacion only performable by Proveedor output values {CiertaClaraDetalladaGratuita, NocumpleCiertaClaraDetalladaGratuita, EsRiesgosa}

action ProveerByS only performable by Proveedor output values {Correctamente, Incorrectamente}

impersonal action RiesgoalConsumidor

action ProveerBySRiesgoso only performable by Proveedor

action EntregarManual only performable by Proveedor output values {EnEspCInstdeUsoInstalyMant,SinEspCInstdeUsoInstalyMant}


//--Tuve que agregar el output value NoPorMedios en las tres action siguientes xq un solo output value arroja error

local interval PeriodoOferta defined by actions ComienzaOferta - TerminaOferta

action EspecificarCondicionesOferta only occurs in scope PeriodoOferta only performable by Oferente output values {PorMedios,NoPorMedios}

action RevocarOferta only occurs in scope PeriodoOferta only performable by Proveedor output values {PorMedios,NoPorMedios}

action DifundirRevocacion only occurs in scope PeriodoOferta only performable by Oferente output values {PorMedios,NoPorMedios}

action SolicitarOferta only performable by Consumidor

action IncumplirContrato only performable by Proveedor output values {Justificada, Injustificada}

action IncumplirOferta only performable by Proveedor output values {Justificada, Injustificada}


action Vender only performable by Proveedor output values {Muebles, Inmuebles, Consumibles, NoConsumibles, Nuevos, Usados, FueraDelEstablecimiento, porCredito, porFinanciacion}
//--Tuve que sacar: synchronizes with Vender xq tira error

action Comprar only performable by Consumidor only occurs in scope PeriodoOferta 
output values {BienesPerecederosalContado, PorMedios}

action CumplirConCondicionesDePub only performable by Proveedor

action Ofertar only occurs in scope PeriodoOferta only performable by Proveedor output values {PorMedios, FueraDelEstablecimiento}

impersonal action ComenzarOferta

impersonal action reclamoExtrajudicial 

impersonal action aparienciaDeReclamoJudicial

impersonal action SancionesVarias
//--Tuve que agregar el output value indicandoDefectos xq un solo output value arroja error

action ofrecerPublicamenteCosasDeficientes only performable by Proveedor output values {sinIndicarQueSonDefectuosa,indicandoDefectos}

action RedactarDocVenta only performable by Proveedor output values {IncluirDatosVenta, NoIncluirDatosVenta, IncluirInformacionRevocacionClarayNotoria}

action ExigirCumplirObligacion only performable by Consumidor

action AceptarEquivalente only performable by Consumidor

action Rescindir only performable by Consumidor

actions ExigirDaniosPerjuicios

impersonal action CasoFortuito

impersonal action FuerzaMayor

action ContratarServicios only performable by Consumidor output values {Personalmente, Electronicamente}

action OfrecerServicios only performable by Proveedor output values {Personalmente, Electronicamente}

action OfrecerRescindir only performable by Proveedor output values {Personalmente, Electronicamente}

impersonal action TerminarPeriodoEnvioRescindir

action EnviarConstanciaRescicion only performable by Proveedor

action ReclamarPorServicioPublico only performable by consumidor_servicio_publicod
action ReclamarPorServicioPublicoconLegislacionPropia only performable by  consumidor_servicio_publico_legislacion_propia output values {AutoridadInstituida, AutoridadAplicacionLeyDC}


//Esta definida mas arriba y tiene synchro. asi que mejor comento esta
//action Reclamar synchronizes with RecibirReclamo only performable by {consumidor_servicio_publicod}
action AtenderReclamo only performable by proveedor_servicios_publicosd output values {enplazoperentorio}
action Prestar_Servicio_Publico_D only performable by proveedor_servicio_publicod output values {conInstalacionEspecifica}
action Verificar_Buen_funcionamiento_Instrumento_Medicion only performable by autoridad_competente
action EmitirLecturasDudosas only performable by instrumento_medicion_autorizado
action Control_Individual_Consumo only performable by  consumidor_servicio_publicod
action Treinta_dias_postInterrupcion

action InterrupcionPrestacionServicioPublicoCulpaP only performable by proveedor_servicio_publicod
action FacturacionDeudasServicio only performable by proveedor_servicio_publicod output values {FechaVto} 



action PrestarServicio only performable by Proveedor output values {FueraDelEstablecimiento}
actions VentaDomiciliaria, VentaPorCorrespondenciayOtros only performable by Proveedor
action ConvocaralConsumidor only performable by Proveedor output values {objetivoDistintoaContratacion, premiouibsequio}

actions VentaPorCorrespondenciayOtras, PublicarNumeroPostalComoDomicilio  only performable by Proveedor
action RevocarAceptacion only performable by Consumidor output values {SinResponsabilidad}
action EntregaDelBien only performable by Proveedor
action CelebracionDelContrato only performable by Proveedor, Consumidor output values {porCredito, porFinancion, noEfectiva}
impersonal action TerminaPeriodo

local interval PeriodoRevocacionAceptacion defined by actions EntregaDelBien, CelebracionDelContrato - TerminaPeriodo
action GenerarCargoAutomatico only performable by Proveedor output values {SinConsentimientodelConsumidor}
action PoneraDisposicionBien only performable by Consumidor
action AbonarGastosDevolucion only performable by Proveedor

impersonal action ViciosdelaCosa
impersonal action ApareceUnaFalla
action EjecutarGarantia  only performable by Consumidor, Proveedor
action TrasladarCosaTallerFabrica only performable by Consumidor
action ServicioTecnico output values {adecuado, inadecuado} only performable by Proveedor
action SuministrarRepuestos only performable by Proveedor

action ExigirCumplimientoGarantia only performable by Consumidor output values {Productor, Importador, Distribuidor, Vendedor}

action CumplirGarantia only performable by Proveedor output values {Productor, Importador, Distribuidor, Vendedor}

action RedactarDocGarantia only performable by Proveedor output values {EnIdiomaNacionalComprensibleCompleto }

action NotificarEntradaVigenciaGarantia only performable by Vendedor

action RepararBajoGarantia only performable by Proveedor output values {Insatisfactorio, Satisfactorio}

action EntregarConstanciaReparacion only performable by Proveedor output values {completo}

actions SustitucionProducto ,  DevolucionDinero,  QuitaPrecio only performable by Proveedor

actions RespetarGarantiaPorViciosRedhibitorios only performable by Proveedor

action Iniciar_Actuaciones_Administrativas only performable by Autoridad_Aplicacion_Nacional output values {DeOficio, PorDenunciasParticulares}

action Cese_Actuaciones only performable by Proveedor
action OfrecerPruebas only performable by Infractor output values {AcreeditarPersoneria, ConstituirDomicilio}
 
//,  dias_realizar_descargo = 0 -- DUDA (se puede poner una condición en lugar de una acción?)

action Admitir_Pruebas only performable by Autoridad_Aplicacion_Nacional
impersonal action Existencia_Hecho_Controvertido
action Denegar_Medidas_Prueba only performable by Autoridad_Aplicacion_Nacional
action Producir_Prueba only performable by Infractor

impersonal action ExistenciaCausaJustificada

action ProrrogarPlazoPrueba only performable by Autoridad_Aplicacion_Nacional

action Dictar_Medidas_No_Innovar only performable by Autoridad_Aplicacion_Nacional



action Incumplir_Acuerdo_Conciliatorio only performable by Infractor
action Sancionar only performable by Autoridad_Aplicacion_Nacional output values {apercibimiento, multa, decomiso, clausura, suspension, perdida_privilegios}
action Exigir_Cumplimiento_Imperativo only performable by Autoridad_Aplicacion_Nacional
action Publicar_Resolucion_Condenatoria only performable by Autoridad_Aplicacion, Infractor output values {nacional, local}
action Desarrollar_Actividad only performable by Infractor output values {unajurisdiccion,  variasjurisdicciones}
action asignarCincuentaPorciento_fondo_Educacion_Consumidor only performable by Autoridad_Aplicacion
action InformarCondicionesOperacionesVentaCredito only performable by Proveedor output values {TasaInteresEfectivaAnual}
actions DemandarNulidadContrato only performable by Consumidor
actions EquipararTasaEfectivaAnualaTasaBCRA only performable by Proveedor
action OtorgarCreditoFinanciacion only performable by EntidadFinanciera output values {efectiva, noefectiva}
actions ResolverSinCosto only performable by Proveedor
actions AdoptarMedidas only performable by BCRA
action violar_deber_informacion only performable by Proveedor
action declarar_nulidad_parcial only performable by autoridad_competente
action integrar_contrato only performable by autoridad_competente

actions ElaborarPoliticas only performable by Autoridad_Aplicacion_Nacional
actions IntervenirEnInstrumentacion only performable by Autoridad_Aplicacion_Nacional
actions RecibirInquietudesDenuncias_DeConsumidoresUsuarios only performable by Autoridad_Aplicacion_Nacional
actions RecibirInquietudesDenuncias_DeConsumidoresUsuarios_Delegada only performable by Autoridad_Aplicacion_Provincial
actions DisponerRealizacionDeInspeccionesyPericias only performable by Autoridad_Aplicacion_Nacional
actions DisponerRealizacionDeInspeccionesyPericias_Delegada only performable by Autoridad_Aplicacion_Provincial
action SolicitarAuxilioFuerzaPublica only performable by Autoridad_Aplicacion_Nacional,Autoridad_Aplicacion_Provincial
//comente el performable xq no estaba definida
//performable by ??
action Iniciar_Accion_Judicial_Inidividual only performable by Consumidor

action Ser_Litisconsorte only performable by Asociacion_Consumidores

action Desistir_Accion_Judicial_Colectiva only performable by Asociacion_Consumidores
action Asumir_Accion_Judicial_Colectiva only performable by Ministerio_Publico_Fiscal
action Aplicar_Danio_Punitivo only performable by Juez
action Correr_Vista_Ministerio_Publico only performable by Juez

action Homologar_Acuerdo_Conciliatorio_o_Transaccion only performable by Juez
action Fundamentar_Auto_Homologacion_Acuerdo_Conciliatorio_o_Transaccion only performable by Juez
action Dictar_Sentencia only performable by Juez output values {contenido_patrimonial, sincontenido_patrimonial}
action Ordenar_Reparacion_Integral only performable by Juez
action Reclamar_porIncidente_Danio_Diferenciado only performable by Consumidor_DanioDiferenciado
action Crear_Grupos_Consumidores only performable by Juez
Impersonal action Afectar_Interes_General
action Conceder_Recurso only performable by Juez output values{con_efecto_devolutivo, sin_efecto_devolutivo}

action Autorizar_Funcionamiento only performable by Autoridad_Aplicacion
action Sustanciar_Reclamo_al_Proveedor only performable by Asociacion_Consumidores
action Invitar_Conciliacion only performable by Asociacion_Consumidores
action Propiciar_Organizacion_Tribunales_Arbitrales only performable by Asociacion_Consumidores


//CONTADORES

local counter dias_de_garantia_restantes  init value  90 
increases with action paso_un_dia_reparandose by 1, 
decreases with action paso_un_dia by 1
//,sets with action comprar.usado to value 90,
//sets with action comprar.nuevo to value 180


//INTERVALOS

local interval periodo_producir_prueba defined by actions Admitir_Pruebas - Producir_Prueba
// saque la condicion, dias_producir_prueba = 0 (DUDA, se puede poner una condición ??)
local interval TiempoEnvioConstancia defined by actions Rescindir - TerminarPeriodoEnvioRescindir



#Clauses

//CAPITULO I - Disposiciones generales
FORALL(i:Consumidor; O(i.Consumir -> i.AdquirirByS | i.UtilizarByS |i.MantenerRelacionConsumo))
FORALL(i:Proveedor; O(i.RespetarLeyDefensaConsumidor))
FORALL(i:ProfesionalMatriculado; F(i.PublicitarServicioProfesional & !i.RespetarLeyDefensaConsumidor))

//CAPITULO II - INFORMACION AL CONSUMIDOR Y PROTECCION DE SU SALUD
FORALL(i:Consumidor; O(i.SolicitarInformacion -> EXISTS(j:Proveedor; j.SuministrarInformacion)))
FORALL(i; O(i.ProveerBySRiesgoso -> i.EntregarManual))
FORALL(i;  F(i.ProveerBySRiesgoso & !i.SuministrarInformacion))

//CAPITULO III - CONDICIONES DE LA OFERTA Y VENTA
FORALL(i:Proveedor; O(INSIDE(i.PeriodoOferta)->i.EspecificarCondicionesOferta))
FORALL(i; F( INSIDE(i.PeriodoOferta) & i.RevocarOferta & !i.DifundirRevocacion ))
FORALL(i; O(i.Ofertar -> ComenzarOferta))
FORALL(i; F(reclamoExtrajudicial & aparienciaDeReclamoJudicial) repaired by (SancionesVarias))
FORALL(i:Proveedor; F(i.ofrecerPublicamenteCosasDeficientes))
FORALL(i:Proveedor; O(i.Vender -> (i.RedactarDocVenta)))
FORALL(i:Proveedor; O(i.OfrecerServicios -> i.OfrecerRescindir))

//CAPITULO IV - COSAS MUEBLES NO CONSUMIBLES
FORALL(i:Consumidor; O(i.EjecutarGarantia &  i.TrasladarCosaTallerFabrica  -> EXISTS(j:Proveedor; j.PagarGastosTraslado) ))

//ARTICULO 12.
FORALL(i: Proveedor; O(i.ServicioTecnico &  i.SuministrarRepuestos))
FORALL(i: Proveedor; O(i.ServicioTecnico | i.SuministrarRepuestos))
//ARTICULO 13. 
FORALL(i:Proveedor;  O(i.EjecutarGarantia -> i.CumplirGarantia))

//ARTICULO 14. 
FORALL(i:Proveedor;  O(i.Vender -> i.RedactarDocGarantia))
FORALL(i:Consumidor; O(i.Comprar -> EXISTS(j:Vendedor; j.NotificarEntradaVigenciaGarantia)))
FORALL(i:Proveedor; O(i.RepararBajoGarantia -> i.EntregarConstanciaReparacion))
//ARTICULO 16. 
//ARTICULO 17.
FORALL(i:Proveedor; O(i.RepararBajoGarantia  -> i.SustitucionProducto  | i.DevolucionDinero | i.QuitaPrecio))

//CAPITULO VII - DE LA VENTA DOMICILIARIA, POR CORRESPONDENCIA Y OTRAS

//Art.32
FORALL(i; O((i.Ofertar | i.PrestarServicio) -> i.VentaDomiciliaria))
FORALL(i; O((i.ConvocaralConsumidor) -> i.VentaDomiciliaria))
//Art 33
FORALL(j:Proveedor; F(j.PublicarNumeroPostalComoDomicilio))

//CAPITULO VIII - DE LAS OPERACIONES DE VENTA DE CREDITO
//ART 36
FORALL(i:Proveedor; O(i.Vender -> i.InformarCondicionesOperacionesVentaCredito))
FORALL(i:Proveedor; O(((i.Vender) & i.InformarCondicionesOperacionesVentaCredito) -> i.EquipararTasaEfectivaAnualaTasaBCRA))
FORALL(i:EntidadFinanciera; O(((i.CelebracionDelContrato) & i.OtorgarCreditoFinanciacion )-> i.CelebracionDelContrato))
FORALL(i:BCRA; O( i.InformarCondicionesOperacionesVentaCredito -> i.AdoptarMedidas))






