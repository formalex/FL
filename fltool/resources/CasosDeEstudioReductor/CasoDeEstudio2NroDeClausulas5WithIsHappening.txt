#Background

//Consumidor_DanioDiferenciado debiera ser un subrol de consumidor
// Infractor es un subrol de Proveed

roles Consumidor, Proveedor disjoint  
roles Consumidor_DanioDiferenciado, ProfesionalMatriculado, Oferente, Vendedor, Gobierno_Local, proveedor_servicios_publicosd, proveedor_servicio_publicod, consumidor_servicio_publicod, consumidor_servicio_publico_legislacion_propia, Infractor, EntidadFinanciera, BCRA, Autoridad_Aplicacion_Provincial, Autoridad_Aplicacion_Nacional, Autoridad_Aplicacion, Asociacion_Consumidores , Ministerio_Publico_Fiscal, Defensor_del_Pueblo, autoridad_competente, instrumento_medicion_autorizado, Transportista, Juez disjoint
//ACCIONES

impersonal action paso_un_dia
impersonal action paso_un_dia_reparandose
action PagarGastosTraslado only performable by Proveedor

action ComienzaOferta only performable by Proveedor output values {PorMediosConDatosOferente, PorMediosSinDatosOferente}

action TerminaOferta only performable by Proveedor

action Consumir only performable by Consumidor

action AdquirirByS only performable by Consumidor

action UtilizarByS only performable by Consumidor output values {Gratuitamente, 
Onerosamente, Correctamente, Incorrectamente}

action MantenerRelacionConsumo only performable by Consumidor

action RespetarLeyDefensaConsumidor only performable by Proveedor, ProfesionalMatriculado

action PublicitarServicioProfesional only performable by ProfesionalMatriculado

action SolicitarInformacion only performable by Consumidor

action SuministrarInformacion only performable by Proveedor output values {CiertaClaraDetalladaGratuita, NocumpleCiertaClaraDetalladaGratuita, EsRiesgosa}

action ProveerByS only performable by Proveedor output values {Correctamente, Incorrectamente}

impersonal action RiesgoalConsumidor

action ProveerBySRiesgoso only performable by Proveedor

action EntregarManual only performable by Proveedor output values {EnEspCInstdeUsoInstalyMant,SinEspCInstdeUsoInstalyMant}


//--Tuve que agregar el output value NoPorMedios en las tres action siguientes xq un solo output value arroja error

local interval PeriodoOferta defined by actions ComienzaOferta - TerminaOferta

action EspecificarCondicionesOferta only occurs in scope PeriodoOferta only performable by Oferente output values {PorMedios,NoPorMedios}

action RevocarOferta only occurs in scope PeriodoOferta only performable by Proveedor output values {PorMedios,NoPorMedios}

action DifundirRevocacion only occurs in scope PeriodoOferta only performable by Oferente output values {PorMedios,NoPorMedios}

action SolicitarOferta only performable by Consumidor

action IncumplirContrato only performable by Proveedor output values {Justificada, Injustificada}

action IncumplirOferta only performable by Proveedor output values {Justificada, Injustificada}


action Vender only performable by Proveedor output values {Muebles, Inmuebles, Consumibles, NoConsumibles, Nuevos, Usados, FueraDelEstablecimiento, porCredito, porFinanciacion}
//--Tuve que sacar: synchronizes with Vender xq tira error

action Comprar only performable by Consumidor only occurs in scope PeriodoOferta 
output values {BienesPerecederosalContado, PorMedios}

action CumplirConCondicionesDePub only performable by Proveedor

action Ofertar only occurs in scope PeriodoOferta only performable by Proveedor output values {PorMedios, FueraDelEstablecimiento}

impersonal action ComenzarOferta

impersonal action reclamoExtrajudicial 

impersonal action aparienciaDeReclamoJudicial

impersonal action SancionesVarias
//--Tuve que agregar el output value indicandoDefectos xq un solo output value arroja error

action ofrecerPublicamenteCosasDeficientes only performable by Proveedor output values {sinIndicarQueSonDefectuosa,indicandoDefectos}

action RedactarDocVenta only performable by Proveedor output values {IncluirDatosVenta, NoIncluirDatosVenta, IncluirInformacionRevocacionClarayNotoria}

action ExigirCumplirObligacion only performable by Consumidor

action AceptarEquivalente only performable by Consumidor

action Rescindir only performable by Consumidor

actions ExigirDaniosPerjuicios

impersonal action CasoFortuito

impersonal action FuerzaMayor

action ContratarServicios only performable by Consumidor output values {Personalmente, Electronicamente}

action OfrecerServicios only performable by Proveedor output values {Personalmente, Electronicamente}

action OfrecerRescindir only performable by Proveedor output values {Personalmente, Electronicamente}

impersonal action TerminarPeriodoEnvioRescindir

action EnviarConstanciaRescicion only performable by Proveedor

action ReclamarPorServicioPublico only performable by consumidor_servicio_publicod

//Esta definida mas arriba y tiene synchro. asi que mejor comento esta
//action Reclamar synchronizes with RecibirReclamo only performable by {consumidor_servicio_publicod}
action Treinta_dias_postInterrupcion


action PrestarServicio only performable by Proveedor output values {FueraDelEstablecimiento, ningunoDeLosAnteriores}
actions VentaDomiciliaria, VentaPorCorrespondenciayOtros only performable by Proveedor
action ConvocaralConsumidor only performable by Proveedor output values {objetivoDistintoaContratacion, premiouibsequio}

actions VentaPorCorrespondenciayOtras, PublicarNumeroPostalComoDomicilio  only performable by Proveedor
action RevocarAceptacion only performable by Consumidor output values {SinResponsabilidad, ningunoDeLosAnteriores}
action EntregaDelBien only performable by Proveedor
action CelebracionDelContrato only performable by Proveedor, Consumidor output values {porCredito, porFinancion, noEfectiva}
impersonal action TerminaPeriodo

local interval PeriodoRevocacionAceptacion defined by actions EntregaDelBien, CelebracionDelContrato - TerminaPeriodo
action GenerarCargoAutomatico only performable by Proveedor output values {SinConsentimientodelConsumidor, ningunoDeLosAnteriores}
action PoneraDisposicionBien only performable by Consumidor
action AbonarGastosDevolucion only performable by Proveedor

impersonal action ViciosdelaCosa
action EjecutarGarantia  only performable by Consumidor, Proveedor
action TrasladarCosaTallerFabrica only performable by Consumidor
action ServicioTecnico output values {adecuado, inadecuado} only performable by Proveedor
action SuministrarRepuestos only performable by Proveedor

action ExigirCumplimientoGarantia only performable by Consumidor output values {Productor, Importador, Distribuidor, Vendedor}

action CumplirGarantia only performable by Proveedor output values {Productor, Importador, Distribuidor, Vendedor}

action RedactarDocGarantia only performable by Proveedor output values {EnIdiomaNacionalComprensibleCompleto, ningunoDeLosAnteriores}

action NotificarEntradaVigenciaGarantia only performable by Vendedor

action RepararBajoGarantia only performable by Proveedor output values {Insatisfactorio, Satisfactorio}

action EntregarConstanciaReparacion only performable by Proveedor output values {completo, ningunoDeLosAnteriores}

actions SustitucionProducto ,  DevolucionDinero,  QuitaPrecio only performable by Proveedor

actions RespetarGarantiaPorViciosRedhibitorios only performable by Proveedor

action OfrecerPruebas only performable by Infractor output values {AcreeditarPersoneria, ConstituirDomicilio}
 
//,  dias_realizar_descargo = 0 -- DUDA (se puede poner una condición en lugar de una acción?)


action Sancionar only performable by Autoridad_Aplicacion_Nacional output values {apercibimiento, multa, decomiso, clausura, suspension, perdida_privilegios}

action InformarCondicionesOperacionesVentaCredito only performable by Proveedor output values {TasaInteresEfectivaAnual, ningunoDeLosAnteriores}
actions DemandarNulidadContrato only performable by Consumidor
actions EquipararTasaEfectivaAnualaTasaBCRA only performable by Proveedor
action OtorgarCreditoFinanciacion only performable by EntidadFinanciera output values {efectiva, noefectiva}
actions ResolverSinCosto only performable by Proveedor
actions AdoptarMedidas only performable by BCRA
action violar_deber_informacion only performable by Proveedor


//comente el performable xq no estaba definida
//performable by ??
action Iniciar_Accion_Judicial_Inidividual only performable by Consumidor

Impersonal action Afectar_Interes_General

//CONTADORES

local counter dias_de_garantia_restantes  init value  90 
increases with action paso_un_dia_reparandose by 1, 
decreases with action paso_un_dia by 1
//,sets with action comprar.usado to value 90,
//sets with action comprar.nuevo to value 180


//INTERVALOS

// saque la condicion, dias_producir_prueba = 0 (DUDA, se puede poner una condición ??)
local interval TiempoEnvioConstancia defined by actions Rescindir - TerminarPeriodoEnvioRescindir



#Clauses

//CAPITULO I - Disposiciones generales
FORALL(i:Consumidor; O(isHappening(i.Consumir) -> isHappening(i.AdquirirByS) | isHappening(i.UtilizarByS) |isHappening(i.MantenerRelacionConsumo)))
FORALL(i:Proveedor; O(isHappening(i.RespetarLeyDefensaConsumidor)))
FORALL(i:ProfesionalMatriculado; F(isHappening(i.PublicitarServicioProfesional) & !isHappening(i.RespetarLeyDefensaConsumidor)))

//CAPITULO II - INFORMACION AL CONSUMIDOR Y PROTECCION DE SU SALUD
FORALL(i:Consumidor; O(isHappening(i.SolicitarInformacion) -> EXISTS(j:Proveedor; isHappening(j.SuministrarInformacion))))
FORALL(i; O(isHappening(i.ProveerBySRiesgoso) -> isHappening(i.EntregarManual)))







